<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz - Hot Runner Training Center</title>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&family=Prompt:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Sarabun', sans-serif;
            background: linear-gradient(135deg, #0a1628 0%, #1a2d4a 50%, #0f2236 100%);
            min-height: 100vh;
            color: #fff;
            overflow-x: hidden;
        }

        /* Container */
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            margin-bottom: 30px;
        }

        .quiz-title {
            font-family: 'Prompt', sans-serif;
            font-size: 1.5em;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .quiz-title i {
            color: #00d9ff;
        }

        .quiz-info {
            display: flex;
            gap: 25px;
        }

        .info-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 18px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .info-item i {
            color: #00d9ff;
        }

        .info-item.timer {
            background: linear-gradient(135deg, rgba(255, 107, 53, 0.2), rgba(255, 152, 0, 0.2));
            border-color: rgba(255, 152, 0, 0.3);
        }

        .info-item.timer i {
            color: #ff9800;
        }

        #timerDisplay {
            font-weight: 700;
            font-size: 1.2em;
            color: #ff9800;
        }

        /* Progress Bar */
        .progress-container {
            margin-bottom: 30px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 0.9em;
            color: rgba(255, 255, 255, 0.7);
        }

        .progress-bar {
            height: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00d9ff, #0066ff);
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        /* Quiz Card */
        .quiz-card {
            background: linear-gradient(145deg, rgba(30, 42, 61, 0.9), rgba(22, 32, 46, 0.9));
            border-radius: 20px;
            padding: 40px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
        }

        /* Question */
        .question-number {
            display: inline-block;
            padding: 8px 20px;
            background: linear-gradient(135deg, #00d9ff, #0066ff);
            border-radius: 20px;
            font-weight: 600;
            margin-bottom: 20px;
        }

        .question-text {
            font-size: 1.4em;
            line-height: 1.6;
            margin-bottom: 30px;
            font-weight: 500;
        }

        .question-image {
            width: 100%;
            max-height: 300px;
            object-fit: contain;
            border-radius: 10px;
            margin-bottom: 25px;
        }

        /* Options */
        .options-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .option-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 20px 25px;
            background: rgba(255, 255, 255, 0.03);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .option-item:hover {
            background: rgba(0, 217, 255, 0.1);
            border-color: rgba(0, 217, 255, 0.3);
            transform: translateX(10px);
        }

        .option-item.selected {
            background: rgba(0, 217, 255, 0.15);
            border-color: #00d9ff;
        }

        .option-item.correct {
            background: rgba(0, 200, 83, 0.15);
            border-color: #00c853;
        }

        .option-item.wrong {
            background: rgba(244, 67, 54, 0.15);
            border-color: #f44336;
        }

        .option-item.disabled {
            pointer-events: none;
        }

        .option-letter {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            transition: all 0.3s ease;
        }

        .option-item.selected .option-letter {
            background: #00d9ff;
            color: #0a1628;
        }

        .option-item.correct .option-letter {
            background: #00c853;
            color: #fff;
        }

        .option-item.wrong .option-letter {
            background: #f44336;
            color: #fff;
        }

        .option-text {
            flex: 1;
            font-size: 1.1em;
        }

        .option-icon {
            font-size: 1.2em;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .option-item.correct .option-icon,
        .option-item.wrong .option-icon {
            opacity: 1;
        }

        /* Explanation */
        .explanation {
            margin-top: 25px;
            padding: 20px;
            background: rgba(255, 215, 0, 0.1);
            border-left: 4px solid #ffd700;
            border-radius: 0 10px 10px 0;
            display: none;
        }

        .explanation.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .explanation-title {
            font-weight: 600;
            color: #ffd700;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Navigation Buttons */
        .quiz-nav {
            display: flex;
            justify-content: space-between;
            gap: 15px;
        }

        .btn {
            padding: 15px 35px;
            border: none;
            border-radius: 12px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .btn-primary {
            background: linear-gradient(135deg, #00d9ff 0%, #0066ff 100%);
            color: #fff;
        }

        .btn-success {
            background: linear-gradient(135deg, #00c853 0%, #00e676 100%);
            color: #fff;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* Question Navigator */
        .question-navigator {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 30px;
        }

        .nav-dot {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nav-dot:hover {
            border-color: #00d9ff;
        }

        .nav-dot.current {
            background: #00d9ff;
            border-color: #00d9ff;
            color: #0a1628;
        }

        .nav-dot.answered {
            background: rgba(0, 200, 83, 0.3);
            border-color: #00c853;
        }

        .nav-dot.flagged {
            background: rgba(255, 152, 0, 0.3);
            border-color: #ff9800;
        }

        /* Quiz Start/End Screens */
        .quiz-screen {
            text-align: center;
            padding: 60px 40px;
        }

        .quiz-screen-icon {
            font-size: 5em;
            margin-bottom: 30px;
        }

        .quiz-screen-icon.start { color: #00d9ff; }
        .quiz-screen-icon.pass { color: #00c853; }
        .quiz-screen-icon.fail { color: #f44336; }

        .quiz-screen h2 {
            font-family: 'Prompt', sans-serif;
            font-size: 2em;
            margin-bottom: 15px;
        }

        .quiz-screen p {
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 30px;
            font-size: 1.1em;
        }

        .quiz-details {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin: 30px 0;
        }

        .quiz-detail-item {
            text-align: center;
        }

        .quiz-detail-value {
            font-size: 2.5em;
            font-weight: 700;
            color: #00d9ff;
        }

        .quiz-detail-label {
            font-size: 0.9em;
            color: rgba(255, 255, 255, 0.6);
        }

        /* Result Summary */
        .result-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin: 30px 0;
        }

        .result-stat {
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
        }

        .result-stat-value {
            font-size: 2em;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .result-stat-value.correct { color: #00c853; }
        .result-stat-value.wrong { color: #f44336; }
        .result-stat-value.score { color: #00d9ff; }
        .result-stat-value.time { color: #ff9800; }

        .result-stat-label {
            font-size: 0.85em;
            color: rgba(255, 255, 255, 0.6);
        }

        /* Loading */
        .loading {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 60px;
        }

        .loading i {
            font-size: 3em;
            animation: spin 1s linear infinite;
            color: #00d9ff;
            margin-bottom: 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .quiz-header {
                flex-direction: column;
                gap: 20px;
            }

            .quiz-info {
                flex-wrap: wrap;
                justify-content: center;
            }

            .quiz-card {
                padding: 25px;
            }

            .question-text {
                font-size: 1.2em;
            }

            .result-stats {
                grid-template-columns: repeat(2, 1fr);
            }

            .quiz-details {
                flex-wrap: wrap;
                gap: 20px;
            }
        }

        /* Back link */
        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            margin-bottom: 20px;
            transition: color 0.3s ease;
        }

        .back-link:hover {
            color: #00d9ff;
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="my-learning.html" class="back-link">
            <i class="fas fa-arrow-left"></i> ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
        </a>

        <!-- Quiz Container -->
        <div id="quizContainer">
            <!-- Start Screen -->
            <div class="quiz-card quiz-screen" id="startScreen">
                <div class="quiz-screen-icon start">
                    <i class="fas fa-clipboard-list"></i>
                </div>
                <h2 id="quizTitle">‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö Hot Runner</h2>
                <p id="quizDescription">‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏ö Hot Runner ‡πÅ‡∏•‡∏∞ Injection Molding</p>
                
                <div class="quiz-details">
                    <div class="quiz-detail-item">
                        <div class="quiz-detail-value" id="totalQuestions">20</div>
                        <div class="quiz-detail-label">‡∏Ç‡πâ‡∏≠</div>
                    </div>
                    <div class="quiz-detail-item">
                        <div class="quiz-detail-value" id="timeLimit">30</div>
                        <div class="quiz-detail-label">‡∏ô‡∏≤‡∏ó‡∏µ</div>
                    </div>
                    <div class="quiz-detail-item">
                        <div class="quiz-detail-value" id="passingScore">75%</div>
                        <div class="quiz-detail-label">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ú‡πà‡∏≤‡∏ô</div>
                    </div>
                </div>

                <button class="btn btn-primary" onclick="startQuiz()">
                    <i class="fas fa-play"></i> ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö
                </button>
            </div>

            <!-- Quiz Content -->
            <div id="quizContent" style="display: none;">
                <!-- Header -->
                <div class="quiz-header">
                    <div class="quiz-title">
                        <i class="fas fa-clipboard-check"></i>
                        <span id="quizTitleHeader">‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö Hot Runner</span>
                    </div>
                    <div class="quiz-info">
                        <div class="info-item">
                            <i class="fas fa-question-circle"></i>
                            <span>‡∏Ç‡πâ‡∏≠ <span id="currentQuestion">1</span>/<span id="totalQ">20</span></span>
                        </div>
                        <div class="info-item timer">
                            <i class="fas fa-clock"></i>
                            <span id="timerDisplay">30:00</span>
                        </div>
                    </div>
                </div>

                <!-- Progress -->
                <div class="progress-container">
                    <div class="progress-info">
                        <span>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤</span>
                        <span id="progressPercent">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                    </div>
                </div>

                <!-- Question Navigator -->
                <div class="question-navigator" id="questionNav">
                    <!-- Generated by JavaScript -->
                </div>

                <!-- Question Card -->
                <div class="quiz-card">
                    <span class="question-number" id="questionNumber">‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà 1</span>
                    <img class="question-image" id="questionImage" style="display: none;">
                    <div class="question-text" id="questionText">Loading...</div>
                    
                    <div class="options-list" id="optionsList">
                        <!-- Generated by JavaScript -->
                    </div>

                    <div class="explanation" id="explanation">
                        <div class="explanation-title">
                            <i class="fas fa-lightbulb"></i>
                            ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢
                        </div>
                        <div id="explanationText"></div>
                    </div>
                </div>

                <!-- Navigation -->
                <div class="quiz-nav">
                    <button class="btn btn-secondary" id="prevBtn" onclick="prevQuestion()">
                        <i class="fas fa-chevron-left"></i> ‡∏Ç‡πâ‡∏≠‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤
                    </button>
                    <button class="btn btn-secondary" id="flagBtn" onclick="flagQuestion()">
                        <i class="fas fa-flag"></i> ‡∏ï‡∏¥‡∏î‡∏ò‡∏á
                    </button>
                    <button class="btn btn-primary" id="nextBtn" onclick="nextQuestion()">
                        ‡∏Ç‡πâ‡∏≠‡∏ñ‡∏±‡∏î‡πÑ‡∏õ <i class="fas fa-chevron-right"></i>
                    </button>
                    <button class="btn btn-success" id="submitBtn" onclick="submitQuiz()" style="display: none;">
                        <i class="fas fa-check"></i> ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö
                    </button>
                </div>
            </div>

            <!-- Result Screen -->
            <div class="quiz-card quiz-screen" id="resultScreen" style="display: none;">
                <div class="quiz-screen-icon" id="resultIcon">
                    <i class="fas fa-trophy"></i>
                </div>
                <h2 id="resultTitle">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢!</h2>
                <p id="resultMessage">‡∏Ñ‡∏∏‡∏ì‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö</p>

                <div class="result-stats">
                    <div class="result-stat">
                        <div class="result-stat-value correct" id="correctCount">0</div>
                        <div class="result-stat-label">‡∏ï‡∏≠‡∏ö‡∏ñ‡∏π‡∏Å</div>
                    </div>
                    <div class="result-stat">
                        <div class="result-stat-value wrong" id="wrongCount">0</div>
                        <div class="result-stat-label">‡∏ï‡∏≠‡∏ö‡∏ú‡∏¥‡∏î</div>
                    </div>
                    <div class="result-stat">
                        <div class="result-stat-value score" id="finalScore">0%</div>
                        <div class="result-stat-label">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</div>
                    </div>
                    <div class="result-stat">
                        <div class="result-stat-value time" id="timeTaken">00:00</div>
                        <div class="result-stat-label">‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ</div>
                    </div>
                </div>

                <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
                    <button class="btn btn-secondary" onclick="reviewQuiz()">
                        <i class="fas fa-search"></i> ‡∏î‡∏π‡πÄ‡∏â‡∏•‡∏¢
                    </button>
                    <button class="btn btn-primary" onclick="retryQuiz()">
                        <i class="fas fa-redo"></i> ‡∏ó‡∏≥‡πÉ‡∏´‡∏°‡πà
                    </button>
                    <a href="my-learning.html" class="btn btn-success">
                        <i class="fas fa-home"></i> ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
                    </a>
                </div>
            </div>

            <!-- Loading -->
            <div class="quiz-card loading" id="loadingScreen" style="display: none;">
                <i class="fas fa-spinner"></i>
                <span>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö...</span>
            </div>
        </div>
    </div>

    <script>
        // Quiz Configuration
        let quizConfig = {
            type: 'pretest', // pretest, posttest, module
            category: 'hot_runner',
            timeLimit: 30, // minutes
            passingScore: 75
        };

        // Quiz State
        let questions = [];
        let currentIndex = 0;
        let answers = {};
        let flagged = [];
        let startTime = null;
        let timerInterval = null;
        let remainingTime = 0;
        let isReviewing = false;

        // Sample Questions (in real app, fetch from API)
        const sampleQuestions = [
            {
                id: 1,
                question: "Hot Runner System ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?",
                options: [
                    "‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏¢‡πá‡∏ô‡πÉ‡∏ô‡πÅ‡∏°‡πà‡∏û‡∏¥‡∏°‡∏û‡πå",
                    "‡∏£‡∏∞‡∏ö‡∏ö‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡πÑ‡∏´‡∏•‡∏Ç‡∏≠‡∏á‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥",
                    "‡∏£‡∏∞‡∏ö‡∏ö‡∏â‡∏µ‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥",
                    "‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏ä‡∏¥‡πâ‡∏ô‡∏á‡∏≤‡∏ô"
                ],
                correctAnswer: 1,
                explanation: "Hot Runner System ‡∏Ñ‡∏∑‡∏≠‡∏£‡∏∞‡∏ö‡∏ö‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡πÑ‡∏´‡∏•‡∏Ç‡∏≠‡∏á‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡πÉ‡∏´‡πâ‡∏Ñ‡∏á‡∏ó‡∏µ‡πà‡∏ï‡∏•‡∏≠‡∏î‡πÄ‡∏ß‡∏•‡∏≤ ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å‡πÑ‡∏´‡∏•‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡πÅ‡∏Ç‡πá‡∏á‡∏ï‡∏±‡∏ß ‡∏ä‡πà‡∏ß‡∏¢‡∏•‡∏î Runner waste"
            },
            {
                id: 2,
                question: "‡∏Ç‡πâ‡∏≠‡∏î‡∏µ‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á Hot Runner System ‡∏Ñ‡∏∑‡∏≠‡∏Ç‡πâ‡∏≠‡πÉ‡∏î?",
                options: [
                    "‡∏•‡∏î‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏°‡πà‡∏û‡∏¥‡∏°‡∏û‡πå",
                    "‡∏•‡∏î‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì Runner waste ‡πÅ‡∏•‡∏∞ Cycle time",
                    "‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ô‡∏≤‡∏Ç‡∏≠‡∏á‡∏ä‡∏¥‡πâ‡∏ô‡∏á‡∏≤‡∏ô",
                    "‡∏•‡∏î‡πÅ‡∏£‡∏á‡∏î‡∏±‡∏ô‡∏â‡∏µ‡∏î"
                ],
                correctAnswer: 1,
                explanation: "Hot Runner ‡∏ä‡πà‡∏ß‡∏¢‡∏•‡∏î Runner waste ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏±‡∏î‡∏ó‡∏¥‡πâ‡∏á ‡πÅ‡∏•‡∏∞‡∏•‡∏î Cycle time ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏≠‡πÉ‡∏´‡πâ Runner ‡πÄ‡∏¢‡πá‡∏ô‡∏ï‡∏±‡∏ß"
            },
            {
                id: 3,
                question: "‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÉ‡∏ô Hot Runner ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö PP (Polypropylene) ‡πÇ‡∏î‡∏¢‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡πÉ‡∏î?",
                options: [
                    "150-180¬∞C",
                    "200-250¬∞C",
                    "280-320¬∞C",
                    "350-400¬∞C"
                ],
                correctAnswer: 1,
                explanation: "PP ‡∏°‡∏µ Melt temperature ‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 200-250¬∞C ‡∏ã‡∏∂‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏ä‡πà‡∏ß‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÑ‡∏´‡∏•‡∏ú‡πà‡∏≤‡∏ô Hot Runner"
            },
            {
                id: 4,
                question: "Valve Gate ‡πÉ‡∏ô Hot Runner ‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏≠‡∏∞‡πÑ‡∏£?",
                options: [
                    "‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏Ç‡∏≠‡∏á Heater",
                    "‡πÄ‡∏õ‡∏¥‡∏î-‡∏õ‡∏¥‡∏î‡∏ó‡∏≤‡∏á‡πÑ‡∏´‡∏•‡∏Ç‡∏≠‡∏á‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å‡∏ó‡∏µ‡πà Gate",
                    "‡∏ß‡∏±‡∏î‡πÅ‡∏£‡∏á‡∏î‡∏±‡∏ô‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö",
                    "‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡πÑ‡∏´‡∏•"
                ],
                correctAnswer: 1,
                explanation: "Valve Gate ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏õ‡∏¥‡∏î-‡∏õ‡∏¥‡∏î‡∏ó‡∏≤‡∏á‡πÑ‡∏´‡∏•‡∏Ç‡∏≠‡∏á‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å‡∏ó‡∏µ‡πà Gate ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ‡∏£‡∏∞‡∏ö‡∏ö Hydraulic ‡∏´‡∏£‡∏∑‡∏≠ Pneumatic ‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡πÑ‡∏î‡πâ Gate mark ‡∏ó‡∏µ‡πà‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°"
            },
            {
                id: 5,
                question: "‡∏õ‡∏±‡∏ç‡∏´‡∏≤ 'Drooling' ‡πÉ‡∏ô Hot Runner ‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡πÉ‡∏î?",
                options: [
                    "‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏™‡∏π‡∏á‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å‡πÑ‡∏´‡∏•‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏°‡πà‡∏û‡∏¥‡∏°‡∏û‡πå",
                    "‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏ï‡πà‡∏≥‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ",
                    "‡πÅ‡∏£‡∏á‡∏î‡∏±‡∏ô‡∏â‡∏µ‡∏î‡∏™‡∏π‡∏á‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ",
                    "Cycle time ‡∏™‡∏±‡πâ‡∏ô‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ"
                ],
                correctAnswer: 0,
                explanation: "Drooling ‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏ó‡∏µ‡πà Nozzle tip ‡∏™‡∏π‡∏á‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ô‡∏∑‡∏î‡∏ï‡πà‡∏≥‡πÅ‡∏•‡∏∞‡πÑ‡∏´‡∏•‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏°‡πà‡∏û‡∏¥‡∏°‡∏û‡πå"
            },
            {
                id: 6,
                question: "Thermocouple ‡πÉ‡∏ô Hot Runner ‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏≠‡∏∞‡πÑ‡∏£?",
                options: [
                    "‡πÉ‡∏´‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≠‡∏ô",
                    "‡∏ß‡∏±‡∏î‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡πÑ‡∏õ‡∏¢‡∏±‡∏á Controller",
                    "‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÅ‡∏£‡∏á‡∏î‡∏±‡∏ô",
                    "‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏£‡∏±‡πà‡∏ß‡πÑ‡∏´‡∏•"
                ],
                correctAnswer: 1,
                explanation: "Thermocouple ‡πÄ‡∏õ‡πá‡∏ô Temperature sensor ‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ß‡∏±‡∏î‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡πÑ‡∏õ‡∏¢‡∏±‡∏á Temperature Controller ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á Heater"
            },
            {
                id: 7,
                question: "‡∏Å‡∏≤‡∏£ Color change ‡πÉ‡∏ô Hot Runner ‡∏Ñ‡∏ß‡∏£‡∏ó‡∏≥‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£?",
                options: [
                    "‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡πÉ‡∏´‡πâ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î",
                    "‡πÉ‡∏ä‡πâ Purging compound ‡πÅ‡∏•‡∏∞‡∏â‡∏µ‡∏î‡∏à‡∏ô‡∏™‡∏µ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå",
                    "‡∏•‡∏î‡πÅ‡∏£‡∏á‡∏î‡∏±‡∏ô‡∏â‡∏µ‡∏î",
                    "‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß‡∏£‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏¢‡πá‡∏ô"
                ],
                correctAnswer: 1,
                explanation: "‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡πÉ‡∏ô Hot Runner ‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ Purging compound ‡∏´‡∏£‡∏∑‡∏≠‡∏ß‡∏±‡∏™‡∏î‡∏∏‡πÉ‡∏´‡∏°‡πà‡∏â‡∏µ‡∏î‡∏ú‡πà‡∏≤‡∏ô‡∏à‡∏ô‡∏Å‡∏ß‡πà‡∏≤‡∏™‡∏µ‡∏à‡∏∞‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå ‡∏≠‡∏≤‡∏à‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏•‡πâ‡∏≤‡∏á‡πÑ‡∏î‡πâ‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô"
            },
            {
                id: 8,
                question: "‡∏Ç‡πâ‡∏≠‡πÉ‡∏î‡∏Ñ‡∏∑‡∏≠‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡∏≠‡∏á Hot Runner Nozzle?",
                options: [
                    "Open Gate ‡πÅ‡∏•‡∏∞ Valve Gate",
                    "Cold Gate ‡πÅ‡∏•‡∏∞ Hot Gate",
                    "Direct Gate ‡πÅ‡∏•‡∏∞ Indirect Gate",
                    "Single Gate ‡πÅ‡∏•‡∏∞ Multi Gate"
                ],
                correctAnswer: 0,
                explanation: "Hot Runner Nozzle ‡πÅ‡∏ö‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô 2 ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏´‡∏•‡∏±‡∏Å: Open Gate (‡πÄ‡∏õ‡∏¥‡∏î‡∏ï‡∏•‡∏≠‡∏î‡πÄ‡∏ß‡∏•‡∏≤) ‡πÅ‡∏•‡∏∞ Valve Gate (‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏¥‡∏î-‡∏õ‡∏¥‡∏î‡∏î‡πâ‡∏ß‡∏¢‡∏ß‡∏≤‡∏•‡πå‡∏ß)"
            },
            {
                id: 9,
                question: "Manifold ‡πÉ‡∏ô Hot Runner System ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?",
                options: [
                    "‡∏ï‡∏±‡∏ß‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥",
                    "‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å‡∏à‡∏≤‡∏Å Sprue ‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞ Nozzle",
                    "‡∏ï‡∏±‡∏ß‡∏¢‡∏∂‡∏î‡πÅ‡∏°‡πà‡∏û‡∏¥‡∏°‡∏û‡πå",
                    "‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏•‡πà‡∏≠‡πÄ‡∏¢‡πá‡∏ô"
                ],
                correctAnswer: 1,
                explanation: "Manifold ‡∏Ñ‡∏∑‡∏≠‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å‡∏à‡∏≤‡∏Å Sprue ‡πÑ‡∏õ‡∏¢‡∏±‡∏á Nozzle ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ï‡∏±‡∏ß ‡πÇ‡∏î‡∏¢‡∏°‡∏µ Heater ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡πÉ‡∏´‡πâ‡∏Ñ‡∏á‡∏ó‡∏µ‡πà"
            },
            {
                id: 10,
                question: "‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á 'Short shot' ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏â‡∏µ‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡∏£‡∏π‡∏õ‡∏Ñ‡∏∑‡∏≠‡∏Ç‡πâ‡∏≠‡πÉ‡∏î?",
                options: [
                    "‡πÅ‡∏£‡∏á‡∏î‡∏±‡∏ô‡∏â‡∏µ‡∏î‡∏™‡∏π‡∏á‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ",
                    "‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏™‡∏π‡∏á‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ",
                    "‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡∏ó‡∏≤‡∏á‡πÑ‡∏´‡∏•‡∏ñ‡∏π‡∏Å‡∏ö‡∏•‡πá‡∏≠‡∏Å",
                    "Cycle time ‡∏¢‡∏≤‡∏ß‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ"
                ],
                correctAnswer: 2,
                explanation: "Short shot ‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å‡πÑ‡∏´‡∏•‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÉ‡∏ô‡πÅ‡∏°‡πà‡∏û‡∏¥‡∏°‡∏û‡πå‡πÑ‡∏°‡πà‡πÄ‡∏ï‡πá‡∏° ‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏´‡∏•‡∏±‡∏Å‡∏Ñ‡∏∑‡∏≠‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å‡πÑ‡∏°‡πà‡∏û‡∏≠ ‡πÅ‡∏£‡∏á‡∏î‡∏±‡∏ô‡∏ï‡πà‡∏≥ ‡∏´‡∏£‡∏∑‡∏≠‡∏ó‡∏≤‡∏á‡πÑ‡∏´‡∏•‡∏ñ‡∏π‡∏Å‡∏ö‡∏•‡πá‡∏≠‡∏Å"
            }
        ];

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Get quiz type from URL parameters
            const urlParams = new URLSearchParams(window.location.search);
            quizConfig.type = urlParams.get('type') || 'pretest';
            quizConfig.category = urlParams.get('category') || 'hot_runner';
            
            updateQuizInfo();
        });

        // Update Quiz Info
        function updateQuizInfo() {
            const titles = {
                'pretest': 'Pre-Test: ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ô',
                'posttest': 'Post-Test: ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô',
                'module': '‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô'
            };
            
            document.getElementById('quizTitle').textContent = titles[quizConfig.type] || '‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö';
            document.getElementById('quizTitleHeader').textContent = titles[quizConfig.type] || '‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö';
        }

        // Start Quiz
        async function startQuiz() {
            document.getElementById('startScreen').style.display = 'none';
            document.getElementById('loadingScreen').style.display = 'flex';

            try {
                // Try to fetch from API
                // const response = await fetch(`quiz_api.php?action=get_questions&type=${quizConfig.type}&category=${quizConfig.category}`);
                // questions = await response.json();
                
                // Use sample questions for demo
                questions = shuffleArray([...sampleQuestions]);
                
                setTimeout(() => {
                    document.getElementById('loadingScreen').style.display = 'none';
                    document.getElementById('quizContent').style.display = 'block';
                    
                    document.getElementById('totalQ').textContent = questions.length;
                    document.getElementById('totalQuestions').textContent = questions.length;
                    
                    // Initialize
                    initQuestionNav();
                    startTimer();
                    showQuestion(0);
                    startTime = new Date();
                }, 1000);
            } catch (error) {
                console.error('Error loading questions:', error);
                questions = shuffleArray([...sampleQuestions]);
                
                setTimeout(() => {
                    document.getElementById('loadingScreen').style.display = 'none';
                    document.getElementById('quizContent').style.display = 'block';
                    
                    document.getElementById('totalQ').textContent = questions.length;
                    initQuestionNav();
                    startTimer();
                    showQuestion(0);
                    startTime = new Date();
                }, 1000);
            }
        }

        // Initialize Question Navigator
        function initQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = questions.map((q, i) => `
                <div class="nav-dot" id="navDot${i}" onclick="goToQuestion(${i})">${i + 1}</div>
            `).join('');
        }

        // Show Question
        function showQuestion(index) {
            currentIndex = index;
            const q = questions[index];
            
            document.getElementById('questionNumber').textContent = `‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà ${index + 1}`;
            document.getElementById('currentQuestion').textContent = index + 1;
            document.getElementById('questionText').textContent = q.question;
            
            // Image (if any)
            const imgEl = document.getElementById('questionImage');
            if (q.image) {
                imgEl.src = q.image;
                imgEl.style.display = 'block';
            } else {
                imgEl.style.display = 'none';
            }
            
            // Options
            const letters = ['‡∏Å', '‡∏Ç', '‡∏Ñ', '‡∏á'];
            const optionsList = document.getElementById('optionsList');
            optionsList.innerHTML = q.options.map((opt, i) => `
                <div class="option-item ${answers[q.id] === i ? 'selected' : ''} ${isReviewing ? 'disabled' : ''}" 
                     onclick="selectOption(${q.id}, ${i})" 
                     data-index="${i}">
                    <span class="option-letter">${letters[i]}</span>
                    <span class="option-text">${opt}</span>
                    <span class="option-icon">
                        <i class="fas fa-check"></i>
                    </span>
                </div>
            `).join('');
            
            // Show correct/wrong if reviewing
            if (isReviewing) {
                showAnswerResult(q);
            }
            
            // Hide explanation unless reviewing
            const explanation = document.getElementById('explanation');
            if (isReviewing) {
                document.getElementById('explanationText').textContent = q.explanation;
                explanation.classList.add('show');
            } else {
                explanation.classList.remove('show');
            }
            
            // Update progress
            updateProgress();
            updateNavDots();
            
            // Update buttons
            document.getElementById('prevBtn').disabled = index === 0;
            
            if (index === questions.length - 1) {
                document.getElementById('nextBtn').style.display = 'none';
                document.getElementById('submitBtn').style.display = isReviewing ? 'none' : 'inline-flex';
            } else {
                document.getElementById('nextBtn').style.display = 'inline-flex';
                document.getElementById('submitBtn').style.display = 'none';
            }
            
            // Flag button
            const flagBtn = document.getElementById('flagBtn');
            if (flagged.includes(index)) {
                flagBtn.innerHTML = '<i class="fas fa-flag"></i> ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏ò‡∏á';
                flagBtn.style.background = 'rgba(255, 152, 0, 0.2)';
            } else {
                flagBtn.innerHTML = '<i class="fas fa-flag"></i> ‡∏ï‡∏¥‡∏î‡∏ò‡∏á';
                flagBtn.style.background = '';
            }
        }

        // Select Option
        function selectOption(questionId, optionIndex) {
            if (isReviewing) return;
            
            answers[questionId] = optionIndex;
            
            // Update UI
            document.querySelectorAll('.option-item').forEach((el, i) => {
                el.classList.toggle('selected', i === optionIndex);
            });
            
            updateNavDots();
        }

        // Show Answer Result (for review mode)
        function showAnswerResult(question) {
            const options = document.querySelectorAll('.option-item');
            options.forEach((el, i) => {
                if (i === question.correctAnswer) {
                    el.classList.add('correct');
                    el.querySelector('.option-icon i').className = 'fas fa-check';
                } else if (answers[question.id] === i) {
                    el.classList.add('wrong');
                    el.querySelector('.option-icon i').className = 'fas fa-times';
                }
            });
        }

        // Navigation
        function nextQuestion() {
            if (currentIndex < questions.length - 1) {
                showQuestion(currentIndex + 1);
            }
        }

        function prevQuestion() {
            if (currentIndex > 0) {
                showQuestion(currentIndex - 1);
            }
        }

        function goToQuestion(index) {
            showQuestion(index);
        }

        // Flag Question
        function flagQuestion() {
            const idx = flagged.indexOf(currentIndex);
            if (idx > -1) {
                flagged.splice(idx, 1);
            } else {
                flagged.push(currentIndex);
            }
            showQuestion(currentIndex);
        }

        // Update Progress
        function updateProgress() {
            const answered = Object.keys(answers).length;
            const percent = Math.round((answered / questions.length) * 100);
            document.getElementById('progressPercent').textContent = percent + '%';
            document.getElementById('progressFill').style.width = percent + '%';
        }

        // Update Navigation Dots
        function updateNavDots() {
            questions.forEach((q, i) => {
                const dot = document.getElementById(`navDot${i}`);
                dot.className = 'nav-dot';
                
                if (i === currentIndex) dot.classList.add('current');
                if (answers[q.id] !== undefined) dot.classList.add('answered');
                if (flagged.includes(i)) dot.classList.add('flagged');
            });
        }

        // Timer
        function startTimer() {
            remainingTime = quizConfig.timeLimit * 60;
            updateTimerDisplay();
            
            timerInterval = setInterval(() => {
                remainingTime--;
                updateTimerDisplay();
                
                if (remainingTime <= 0) {
                    clearInterval(timerInterval);
                    submitQuiz();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(remainingTime / 60);
            const seconds = remainingTime % 60;
            const display = document.getElementById('timerDisplay');
            display.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            if (remainingTime <= 60) {
                display.style.color = '#f44336';
            } else if (remainingTime <= 300) {
                display.style.color = '#ff9800';
            }
        }

        // Submit Quiz
        function submitQuiz() {
            if (timerInterval) {
                clearInterval(timerInterval);
            }
            
            // Calculate results
            let correct = 0;
            questions.forEach(q => {
                if (answers[q.id] === q.correctAnswer) {
                    correct++;
                }
            });
            
            const wrong = questions.length - correct;
            const score = Math.round((correct / questions.length) * 100);
            const endTime = new Date();
            const timeDiff = Math.round((endTime - startTime) / 1000);
            const minutes = Math.floor(timeDiff / 60);
            const seconds = timeDiff % 60;
            
            // Update result screen
            document.getElementById('correctCount').textContent = correct;
            document.getElementById('wrongCount').textContent = wrong;
            document.getElementById('finalScore').textContent = score + '%';
            document.getElementById('timeTaken').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            const passed = score >= quizConfig.passingScore;
            const resultIcon = document.getElementById('resultIcon');
            const resultTitle = document.getElementById('resultTitle');
            const resultMessage = document.getElementById('resultMessage');
            
            if (passed) {
                resultIcon.className = 'quiz-screen-icon pass';
                resultIcon.innerHTML = '<i class="fas fa-trophy"></i>';
                resultTitle.textContent = '‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢! üéâ';
                resultMessage.textContent = '‡∏Ñ‡∏∏‡∏ì‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö';
            } else {
                resultIcon.className = 'quiz-screen-icon fail';
                resultIcon.innerHTML = '<i class="fas fa-times-circle"></i>';
                resultTitle.textContent = '‡πÄ‡∏™‡∏µ‡∏¢‡πÉ‡∏à‡∏î‡πâ‡∏ß‡∏¢';
                resultMessage.textContent = '‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á!';
            }
            
            // Save result
            saveQuizResult(score, correct, wrong, timeDiff);
            
            // Show result screen
            document.getElementById('quizContent').style.display = 'none';
            document.getElementById('resultScreen').style.display = 'block';
        }

        // Save Quiz Result
        function saveQuizResult(score, correct, wrong, time) {
            const result = {
                type: quizConfig.type,
                category: quizConfig.category,
                score: score,
                correct: correct,
                wrong: wrong,
                total: questions.length,
                time: time,
                date: new Date().toISOString()
            };
            
            // Save to localStorage
            const results = JSON.parse(localStorage.getItem('quiz_results')) || [];
            results.push(result);
            localStorage.setItem('quiz_results', JSON.stringify(results));
            
            // Save posttest score for certificate
            if (quizConfig.type === 'posttest') {
                localStorage.setItem('posttest_score', score);
            }
            
            // Try to save to API
            // fetch('quiz_api.php', {
            //     method: 'POST',
            //     headers: { 'Content-Type': 'application/json' },
            //     body: JSON.stringify({ action: 'save_result', ...result })
            // });
        }

        // Review Quiz
        function reviewQuiz() {
            isReviewing = true;
            document.getElementById('resultScreen').style.display = 'none';
            document.getElementById('quizContent').style.display = 'block';
            document.getElementById('flagBtn').style.display = 'none';
            
            showQuestion(0);
        }

        // Retry Quiz
        function retryQuiz() {
            location.reload();
        }

        // Utility: Shuffle Array
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
    </script>
</body>
</html>
